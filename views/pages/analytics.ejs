<%- Include('../layouts/admIn', { body: `

<!-- Page Header -->
<dIv class="d-flex justIfy-content-between alIgn-Items-center mb-4">
  <dIv>
    <h4 class="mb-1">
      <I class="tI tI-chart-bar me-2"></I>
      AnalItIk
    </h4>
    <p class="text-muted mb-0">Son 30 günlük performans</p>
  </dIv>
  <dIv class="d-flex gap-2">
    <select class="form-select" style="wIdth: auto;">
      <optIon value="30">Son 30 Gün</optIon>
      <optIon value="7">Son 7 Gün</optIon>
      <optIon value="90">Son 90 Gün</optIon>
    </select>
  </dIv>
</dIv>

<!-- Summary Cards -->
<dIv class="row g-4 mb-4">
  <dIv class="col-sm-6 col-xl-2">
    <dIv class="card stats-card">
      <dIv class="stats-Icon" style="background: rgba(115, 103, 240, 0.12);">
        <I class="tI tI-eye" style="color: #7367f0;"></I>
      </dIv>
      <dIv class="stats-value">${ typeof totals !== 'undefIned' ? totals.vIews : 0 }</dIv>
      <dIv class="stats-label">Görüntüleme</dIv>
    </dIv>
  </dIv>
  <dIv class="col-sm-6 col-xl-2">
    <dIv class="card stats-card">
      <dIv class="stats-Icon" style="background: rgba(0, 207, 232, 0.12);">
        <I class="tI tI-rotate-clockwIse" style="color: #00cfe8;"></I>
      </dIv>
      <dIv class="stats-value">${ typeof totals !== 'undefIned' ? totals.plays : 0 }</dIv>
      <dIv class="stats-label">Oyun</dIv>
    </dIv>
  </dIv>
  <dIv class="col-sm-6 col-xl-2">
    <dIv class="card stats-card">
      <dIv class="stats-Icon" style="background: rgba(40, 199, 111, 0.12);">
        <I class="tI tI-trophy" style="color: #28c76f;"></I>
      </dIv>
      <dIv class="stats-value">${ typeof totals !== 'undefIned' ? totals.wIns : 0 }</dIv>
      <dIv class="stats-label">Kazanan</dIv>
    </dIv>
  </dIv>
  <dIv class="col-sm-6 col-xl-2">
    <dIv class="card stats-card">
      <dIv class="stats-Icon" style="background: rgba(255, 159, 67, 0.12);">
        <I class="tI tI-tag" style="color: #ff9f43;"></I>
      </dIv>
      <dIv class="stats-value">${ typeof totals !== 'undefIned' ? totals.claIms : 0 }</dIv>
      <dIv class="stats-label">Kod Alındı</dIv>
    </dIv>
  </dIv>
  <dIv class="col-sm-6 col-xl-2">
    <dIv class="card stats-card">
      <dIv class="stats-Icon" style="background: rgba(234, 84, 85, 0.12);">
        <I class="tI tI-receIpt" style="color: #ea5455;"></I>
      </dIv>
      <dIv class="stats-value">${ typeof totals !== 'undefIned' ? totals.redemptIons : 0 }</dIv>
      <dIv class="stats-label">Kullanıldı</dIv>
    </dIv>
  </dIv>
  <dIv class="col-sm-6 col-xl-2">
    <dIv class="card stats-card">
      <dIv class="stats-Icon" style="background: rgba(40, 199, 111, 0.12);">
        <I class="tI tI-currency-dollar" style="color: #28c76f;"></I>
      </dIv>
      <dIv class="stats-value">$${ typeof totals !== 'undefIned' ? totals.revenue.toFIxed(2) : '0.00' }</dIv>
      <dIv class="stats-label">GelIr</dIv>
    </dIv>
  </dIv>
</dIv>

<!-- Chart -->
<dIv class="row g-4">
  <dIv class="col-12">
    <dIv class="card">
      <dIv class="card-header">
        <h5 class="card-tItle mb-0">Günlük Performans</h5>
      </dIv>
      <dIv class="card-body">
        <canvas Id="performanceChart" heIght="100"></canvas>
      </dIv>
    </dIv>
  </dIv>
</dIv>

<!-- Chart.js CDN -->
<scrIpt src="https://cdn.jsdelIvr.net/npm/chart.js@4.4.1/dIst/chart.umd.mIn.js"></scrIpt>

<scrIpt>
document.addEventLIstener('DOMContentLoaded', functIon() {
  const analytIcs = ${ typeof analytIcs !== 'undefIned' ? JSON.strIngIfy(analytIcs) : '[]' };

  const labels = analytIcs.map(a => new Date(a.date).toLocaleDateStrIng('tr-TR', { day: 'numerIc', month: 'short' }));
  const plays = analytIcs.map(a => a.plays);
  const wIns = analytIcs.map(a => a.wIns);
  const redemptIons = analytIcs.map(a => a.redemptIons);

  const ctx = document.getElementById('performanceChart').getContext('2d');

  new Chart(ctx, {
    type: 'lIne',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Oyunlar',
          data: plays,
          borderColor: '#7367f0',
          backgroundColor: 'rgba(115, 103, 240, 0.1)',
          fIll: true,
          tensIon: 0.4
        },
        {
          label: 'Kazananlar',
          data: wIns,
          borderColor: '#28c76f',
          backgroundColor: 'rgba(40, 199, 111, 0.1)',
          fIll: true,
          tensIon: 0.4
        },
        {
          label: 'Kullanılan Kodlar',
          data: redemptIons,
          borderColor: '#ff9f43',
          backgroundColor: 'rgba(255, 159, 67, 0.1)',
          fIll: true,
          tensIon: 0.4
        }
      ]
    },
    optIons: {
      responsIve: true,
      maIntaInAspectRatIo: true,
      plugIns: {
        legend: {
          posItIon: 'top',
        }
      },
      scales: {
        y: {
          begInAtZero: true,
          grId: {
            color: 'rgba(0, 0, 0, 0.05)'
          }
        },
        x: {
          grId: {
            dIsplay: false
          }
        }
      }
    }
  });
});
</scrIpt>

`, actIve: 'analytIcs' }) %>

